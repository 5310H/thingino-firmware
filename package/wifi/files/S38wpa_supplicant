#!/bin/sh

. /etc/init.d/rc.common

IFACE=wlan0
CONFIG="/etc/$DAEMON_SHORT.conf"
PIDFILE="/run/$DAEMON_SHORT.$IFACE.pid"
DAEMON_ARGS="-i $IFACE -c $CONFIG -P $PIDFILE -B -s"

start() {
	starting
	iface_exists "wlan0" || quit "No wireless interface"
	mkdir -p /var/run/wpa_supplicant
	start-stop-daemon -S -x $DAEMON_FULL -- $DAEMON_ARGS 2>&1 | log
	check_result
}

stop() {
	stopping
	stop_daemon_with_pid
}

case "$1" in
	start | stop)
		$1
		;;
	reload | restart)
		stop
		start
		;;
	*)
		die "Usage: $0 {start|stop|restart|reload}"
		;;
esac

exit 0

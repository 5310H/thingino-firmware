#!/bin/sh

PID="/run/blink.pid"

cleanup() {
	[ -f $PID ] && rm $PID
	exit
}
trap cleanup 1 2 3 6 15

echo $$ > $PID

if [ -z "$1" ]; then
	echo "Usage: blink <pin> [interval, sec.]"
	exit 1
fi

interval=${2:-1}
if [ "$interval" -eq 0 ]; then
	gpio set $1
	sleep infinity
else
	while :; do
		gpio toggle $1
		sleep $interval
	done
fi
